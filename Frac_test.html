<!DOCTYPE html>
<html>

<head>
    <title>Cálculo de fracionamento no processo de Binagem</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 20px;
        }

        h1 {
            color: #007BFF;
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 10px;
        }

        input {
            margin-top: 5px;
        }

        button {
            background-color: #007BFF;
            color: #fff;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        #output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #fff;
        }
    </style>
</head>

<body>

    <h1>Cálculo de fracionamento no processo de Binagem</h1>
    <div id="subtitulo">
        <h2>1º Cenário: Fracionamento de uma bobina em duas partes</h2>
    </div>
    <div id="output"></div>


    <script>
        // Função para encontrar metragem mais próxima
        function encontrarMetragemMaisProxima(metragens, metragemAlvo) {
            if (!metragens) {
                console.error("A array 'metragens' é nula ou indefinida.");
                return null;  // ou qualquer outro valor padrão que faça sentido para o seu caso
            }

            // Filtrar valores menores ou iguais à metragem alvo
            const valoresMenores = metragens.filter(valor => valor <= metragemAlvo);

            // Encontrar o maior valor entre os valores menores
            const metragemFinal = Math.max(...valoresMenores);

            return metragemFinal;
        }

        function calcularFracionamento() {
            let escolha = parseInt(document.querySelector('input[name="produto"]:checked').value);
            let produtoEscolhido = produtos[escolha - 1];

            let metragemMaquina = parseInt(document.getElementById('metragemMaquina').value);
            let metragemEtiqueta = parseInt(document.getElementById('metragemEtiqueta').value);
            let metragemFracionamento = parseInt(document.getElementById('metragemFracionamento').value);

            let metragemSegundaBobina = metragemMaquina - metragemFracionamento;
            let fatorCorrecao = metragemEtiqueta / metragemMaquina;
            let metragemRealPrimeiraBobina = metragemFracionamento * fatorCorrecao;
            let metragemRealSegundaBobina = metragemSegundaBobina * fatorCorrecao;
            let resultadoHTML = "";
            //console.log("Metragem real segunda bobina:", metragemRealSegundaBobina);
            //console.log("Metragens segunda bobina:", metragemSegundaBobina);

            // CAT5e
            const CAT5e = {
                "Caixas": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27],
                "Primeira Bobina": [0, 0, 1270, 1270, 1575, 1880, 2185, 2490, 2795, 3080, 3385, 3690, 3995, 4300, 4605, 4910, 5215, 5520, 5825, 6130, 6435, 6740, 7045, 7045, 7655, 7960, 8262],
                "Segunda Bobina": [0, 0, 1250, 1250, 1555, 1860, 2156, 2470, 2775, 3080, 3385, 3690, 3995, 4300, 4605, 4910, 5215, 5520, 5825, 6130, 6435, 6740, 7045, 7045, 7655, 7960, 8262]
            };

            // CAT6
            const CAT6 = {
                "Caixas": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22],
                "Primeira Bobina": [0, 0, 1270, 1270, 1575, 1880, 2185, 2490, 2795, 3100, 3505, 3810, 4115, 4420, 4725, 5030, 5335, 5640, 5640, 6250, 6555, 6890],
                "Segunda Bobina": [0, 0, 1270, 1270, 1575, 1880, 2185, 2490, 2795, 3100, 3405, 3810, 4115, 4420, 4725, 5030, 5335, 5640, 5640, 6250, 6555, 6890]
            };

            // SEM_FILLER
            const SemFiller = {
                "Caixas": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
                "Primeira Bobina": [0, 0, 1270, 1270, 1575, 1880, 2185, 2490, 2795, 3100, 3505, 3810, 4115, 4420, 4725, 5030, 5030, 5640, 5945, 6320],
                "Segunda Bobina": [0, 0, 1270, 1270, 1575, 1880, 2185, 2490, 2795, 3100, 3200, 3505, 3810, 4115, 4420, 4725, 5030, 5030, 5640, 5945, 6320]
            };

            if (produtoEscolhido == "CAT5e") {
                const metragensPrimeiraBobina = CAT5e["Primeira Bobina"];
                const metragemFinal1 = encontrarMetragemMaisProxima(metragensPrimeiraBobina, metragemRealPrimeiraBobina);

                const metragensSegundaBobina = CAT5e["Segunda Bobina"];
                const metragemFinal2 = encontrarMetragemMaisProxima(metragensSegundaBobina, metragemRealSegundaBobina);

                //console.log("Metragem final segunda bobina:", metragemFinal2);
                resultadoHTML = `Dados para Fracionamento: <br> <br>
                  Primeira bobina Fracionada: ${metragemFinal1} m <br>
                  Segunda bobina Fracionada: ${metragemFinal2} m <br>
                  Metragem da segunda bobina na máquina: ${metragemSegundaBobina} m`;
            } else if (produtoEscolhido == "CAT6") {
                const metragensPrimeiraBobina = CAT6["Primeira Bobina"];
                const metragemFinal1 = encontrarMetragemMaisProxima(metragensPrimeiraBobina, metragemRealPrimeiraBobina);

                const metragensSegundaBobina = CAT6["Segunda Bobina"];
                const metragemFinal2 = encontrarMetragemMaisProxima(metragensSegundaBobina, metragemRealSegundaBobina);

                //console.log("Metragem final segunda bobina:", metragemFinal2);
                resultadoHTML = `Dados para Fracionamento: <br> <br>
                  Primeira bobina Fracionada: ${metragemFinal1} m <br>
                  Segunda bobina Fracionada: ${metragemFinal2} m <br>
                  Metragem da segunda bobina na máquina: ${metragemSegundaBobina} m`;
            } else {
                const metragensPrimeiraBobina = SemFiller["Primeira Bobina"];
                const metragemFinal1 = encontrarMetragemMaisProxima(metragensPrimeiraBobina, metragemRealPrimeiraBobina);

                const metragensSegundaBobina = SemFiller["Segunda Bobina"];
                const metragemFinal2 = encontrarMetragemMaisProxima(metragensSegundaBobina, metragemRealSegundaBobina);

                //console.log("Metragem final segunda bobina:", metragemFinal2);
                resultadoHTML = `Dados para Fracionamento: <br> <br>
                  Primeira bobina Fracionada: ${metragemFinal1} m <br>
                  Segunda bobina Fracionada: ${metragemFinal2} m <br>
                  Metragem da segunda bobina na máquina: ${metragemSegundaBobina} m`;
            }

            // Limpa o conteúdo anterior
            document.getElementById('output').innerHTML = '';

            // Adiciona o novo resultado
            document.getElementById('output').innerHTML = resultadoHTML;

            // Evita o comportamento padrão de enviar o formulário
            return false;
        }

        // Dados
        const produtos = ["CAT5e", "CAT6", "Sem Filler"];

        function imprime(texto) {
            document.getElementById('output').innerHTML += texto + "<br>";
        }

        // Exibindo lista de escolha do produto
        imprime("Escolha um produto:");
        imprime("<br>");

        for (let i = 0; i < produtos.length; i++) {
            imprime(`<label><input type='radio' name='produto' value='${i + 1}'> ${i + 1} - ${produtos[i]}</label>`);
        }

        imprime("<br>");

        imprime(`<label>Qual é a metragem total padrão da tabela da máquina? <input type='number' id='metragemMaquina'></label>`);
        imprime(`<label>Qual é a metragem total da etiqueta do produto? <input type='number' id='metragemEtiqueta'></label>`);
        imprime(`<label>Qual é a metragem do fracionamento na máquina? <input type='number' id='metragemFracionamento'></label>`);
        imprime(`<button onclick='calcularFracionamento()'>Calcular</button>`);
    </script>

    <div id="subtitulo">
        <h2>2ºCenário: Bobinas fracionadas no isolamento</h2>
    </div>

</body>

</html>